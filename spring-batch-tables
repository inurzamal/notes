
For ORACLE Database
--------------------

-- Batch Job Execution Information
CREATE TABLE BATCH_JOB_INSTANCE (
    JOB_INSTANCE_ID NUMBER(19,0) PRIMARY KEY,
    VERSION NUMBER(19,0),
    JOB_NAME NVARCHAR2(100),
    JOB_KEY NVARCHAR2(32),
    CREATE_TIME TIMESTAMP,
    LAST_UPDATED TIMESTAMP
);

CREATE TABLE BATCH_JOB_EXECUTION (
    JOB_EXECUTION_ID NUMBER(19,0) PRIMARY KEY,
    VERSION NUMBER(19,0),
    JOB_INSTANCE_ID NUMBER(19,0),
    CREATE_TIME TIMESTAMP,
    START_TIME TIMESTAMP,
    END_TIME TIMESTAMP,
    STATUS NVARCHAR2(10),
    EXIT_CODE NVARCHAR2(2500),
    EXIT_MESSAGE NVARCHAR2(2500),
    LAST_UPDATED TIMESTAMP,
    JOB_CONFIGURATION_LOCATION NVARCHAR2(2500)
);

CREATE TABLE BATCH_JOB_EXECUTION_PARAMS (
    JOB_EXECUTION_ID NUMBER(19,0),
    TYPE_CD NVARCHAR2(6) NOT NULL,
    KEY_NAME NVARCHAR2(100) NOT NULL,
    STRING_VAL NVARCHAR2(2500),
    DATE_VAL TIMESTAMP,
    LONG_VAL NUMBER(19,0),
    DOUBLE_VAL BINARY_DOUBLE,
    IDENTIFYING CHAR(1),
    PRIMARY KEY (JOB_EXECUTION_ID, TYPE_CD, KEY_NAME),
    FOREIGN KEY (JOB_EXECUTION_ID) REFERENCES BATCH_JOB_EXECUTION(JOB_EXECUTION_ID)
);

CREATE TABLE BATCH_JOB_EXECUTION_CONTEXT (
    JOB_EXECUTION_ID NUMBER(19,0) PRIMARY KEY,
    SHORT_CONTEXT BLOB,
    SERIALIZED_CONTEXT BLOB
);

-- Batch Step Execution Information
CREATE TABLE BATCH_STEP_EXECUTION (
    STEP_EXECUTION_ID NUMBER(19,0) PRIMARY KEY,
    VERSION NUMBER(19,0),
    STEP_NAME NVARCHAR2(100),
    JOB_EXECUTION_ID NUMBER(19,0),
    START_TIME TIMESTAMP,
    END_TIME TIMESTAMP,
    STATUS NVARCHAR2(10),
    COMMIT_COUNT NUMBER(19,0),
    READ_COUNT NUMBER(19,0),
    FILTER_COUNT NUMBER(19,0),
    WRITE_COUNT NUMBER(19,0),
    READ_SKIP_COUNT NUMBER(19,0),
    WRITE_SKIP_COUNT NUMBER(19,0),
    PROCESS_SKIP_COUNT NUMBER(19,0),
    ROLLBACK_COUNT NUMBER(19,0),
    EXIT_CODE NVARCHAR2(2500),
    EXIT_MESSAGE NVARCHAR2(2500),
    LAST_UPDATED TIMESTAMP,
    FOREIGN KEY (JOB_EXECUTION_ID) REFERENCES BATCH_JOB_EXECUTION(JOB_EXECUTION_ID)
);

CREATE TABLE BATCH_STEP_EXECUTION_CONTEXT (
    STEP_EXECUTION_ID NUMBER(19,0) PRIMARY KEY,
    SHORT_CONTEXT BLOB,
    SERIALIZED_CONTEXT BLOB
);

CREATE TABLE BATCH_STEP_EXECUTION_SEQ (
    ID NUMBER(19,0)
);

-- Batch Job Execution Flow
CREATE TABLE BATCH_JOB_EXECUTION_SEQ (
    ID NUMBER(19,0)
);

CREATE TABLE BATCH_JOB_EXECUTION_PARAMS_SEQ (
    ID NUMBER(19,0)
);

CREATE TABLE BATCH_JOB_SEQ (
    ID NUMBER(19,0)
);

INSERT INTO BATCH_JOB_EXECUTION_SEQ (ID) VALUES (1);
INSERT INTO BATCH_JOB_EXECUTION_PARAMS_SEQ (ID) VALUES (1);
INSERT INTO BATCH_STEP_EXECUTION_SEQ (ID) VALUES (1);
INSERT INTO BATCH_JOB_SEQ (ID) VALUES (1);



